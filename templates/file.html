{% extends "base.html" %}
{% block content %}

<h2>File details</h2>

<div class="card">
    <strong>{{ file.filename }}</strong><br>
    <span class="muted">{{ file.size }} bytes</span>
</div>

<div class="card">
    <strong>SHA-256 checksum</strong><br>
    <code>{{ file.sha256 }}</code>
</div>

<div class="card">
    <strong>Expiry</strong><br>
    {% if file.expires %}
        {{ file.expires }}
    {% else %}
        Never
    {% endif %}
</div>

<div class="card">
    <strong>Share link</strong><br><br>

    <button onclick="copyLink()">Copy download link</button>
    <span id="copied" class="muted" style="display:none;">Copied âœ“</span>
</div>

{% if file.preview %}
<div class="card">
    <strong>Text preview (first 15KB)</strong>
    <pre>{{ file.preview }}</pre>
</div>
{% endif %}

<div class="card">
    <form method="post"
          action="/file/{{ file.id }}/delete"
          onsubmit="return confirm('This will permanently delete the file. Continue?');">
        <button class="danger">Delete file</button>
    </form>
</div>

<a href="/">Back to dashboard</a>

<script>
function copyLink() {
    const url = "https://box.floofyredpanda.com{{ file.download }}";
    navigator.clipboard.writeText(url).then(() => {
        const msg = document.getElementById("copied");
        msg.style.display = "inline";
        setTimeout(() => {
            msg.style.display = "none";
        }, 2000);
    });
}
</script>

{% endblock %}
